# FM Передатчик на STM32 и QN8027

Проект системы управления FM передатчиком на базе чипа QN8027 с использованием микроконтроллера STM32.

[English version](README.md)

## Аппаратные особенности

- Плата STM32 BluePill в качестве основного контроллера
- Модуль FM передатчика QN8027
- OLED дисплей (128x64) для пользовательского интерфейса
- Энкодер с кнопкой для управления частотой и настройками
- I2C интерфейс для связи с QN8027
- Отображение частоты и статуса в реальном времени

## Возможности

- Диапазон частот: 76-108 МГц
- Точная подстройка частоты энкодером
- Цифровое отображение текущей частоты
- Мониторинг состояния передатчика
- Сохранение настроек в памяти
- Индикация уровня сигнала в реальном времени

## Информация на дисплее

OLED дисплей отображает:
- Текущую FM частоту
- Уровень сигнала
- Статус передатчика
- Режим работы
- Индикаторы ошибок (при наличии)

## Управление

- Энкодер:
  - Вращение: Настройка частоты
  - Нажатие: Переключение режимов/подтверждение настроек
- Настраиваемые параметры:
  - Частота
  - Мощность передачи
  - Другие параметры QN8027

## Технические характеристики

- Рабочее напряжение: 3.3В
- I2C связь
- Разрешение по частоте: 0.1 МГц
- Считывание энкодера на базе таймера
- Аппаратная защита от дребезга

## Используемые библиотеки

- Arduino core для STM32
- U8g2lib для OLED дисплея
- HardwareTimer для точного тайминга
- Wire (I2C коммуникация)

## Сборка и прошивка

Проект использует PlatformIO как систему сборки. Для сборки и прошивки:

1. Установить PlatformIO
2. Открыть проект
3. Выполнить сборку через PlatformIO
4. Прошить на плату STM32

## Конфигурация пинов

- PB6, PB7 - I2C (SCL, SDA) для QN8027
- Пины дисплея:
  - Указаны в конфигурации дисплея
- Пины энкодера:
  - Настроены для считывания через таймер

## Примечания

- Последовательность инициализации QN8027 критична для правильной работы
- Все настройки проверяются на допустимые диапазоны
- Регулировка частоты в реальном времени
- Обработка ошибок I2C связи
